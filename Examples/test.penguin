                event test_event : i32;

                var eq : _AsyncEventReceiver<i32> = new _AsyncEventReceiver<i32>(test_event, on_test_event);
                fun on_test_event(val b : i32) {
                    print(b as string);
                    if (b == 2) exit(0);
                }
                
                initial {
                    for (var i : i64 in range(0, 3)) {
                        emit test_event(i as i32);
                    }
                }